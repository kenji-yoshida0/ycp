<!DOCTYPE html>
<html lang="en">
<head>
	 <meta charset="UTF-8">
	 <title>テスト:国土数値情報・洪水浸水想定区域データ（河川単位）・北海道"</title>
	 <script src="../node_modules/cesium/Build/CesiumUnminified/Cesium.js"></script>
	 <link rel="stylesheet" href="../node_modules/cesium/Build/Cesium/Widgets/widgets.css">
 	 <link rel="stylesheet" href="../import.css">
	  
</head>
<body>
	テスト画面
	<div id="cesiumContainer" class="●ullSize"></div>
    
<!--script src="./czml/test4.js"></script-->
<script>
	//―――――――――――――――――――――――――――――――――――――――●アクセストークン
	//Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2Njc2MjUyNy1jMTRmLTQzYjAtYmU4Yi00ZWRlOTQzMGQ0NTIiLCJpZCI6MTc1NDU5LCJpYXQiOjE2OTkyNTE4Mjh9.Uf4oJ2FV0EVodjfW04nV6PiHwDAZuud0jGb4v5mjg_E';

	//―――――――――――――――――――――――――――――――――――――――●CesiumViewer　読み込み
const viewer = new Cesium.Viewer("cesiumContainer");





/*
const viewer = new Cesium.Viewer("cesiumContainer", {
  terrain: Cesium.Terrain.fromWorldTerrain(),
});


//viewer.dataSources.add(Cesium.CzmlDataSource.load(czml));
*/






/*



const viewer = new Cesium.Viewer("cesiumContainer", {
  terrain: Cesium.Terrain.fromWorldTerrain(),
});

const viewer = new Cesium.Viewer("cesiumContainer", {
      terrainProvider: new Cesium.CesiumTerrainProvider({
          url: Cesium.IonResource.fromAssetId(770371)
      })
});




const viewer = new Cesium.Viewer("cesiumContainer", {
  terrain: Cesium.Terrain.fromWorldTerrain(),
});
*/



	

	//―――――――――――――――――――――――――――――――――――――――ベースマップの変更
/*
	const imageryProvider = new Cesium.UrlTemplateImageryProvider({
		url: 'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
		maximumlevel:18
	});
	const currnt_image = viewer.scene.imageryLayers.addImageryProvider(imageryProvider);
*/
	//―――――――――――――――――――――――――――――――――――――――3DTiles　表示viewer.zoomTo(tileset);


/*
const tileset = Cesium.Cesium3DTileset.fromIonAssetId(43978);
viewer.scene.primitives.add(tileset);
viewer.zoomTo(tileset);
*/


/*
const point2 = viewer.entities.add({
	name:"福井市", 
	description:"ここは福井市です。",
	position : Cesium.Cartesian3.fromDegrees(144.83,37.67,132), 
	point : {
		pixelSize : 10, 
		color : Cesium.Color.BLUE
	}
});
viewer.zoomTo(viewer.entities);



const tileset = viewer.scene.primitives.add(
    new Cesium.Cesium3DTileset({
        url: Cesium.IonResource.fromAssetId(43978)//メルボルン　Melbourne, Australia
    })
);

const tileset = viewer.scene.primitives.add(
    new Cesium.Cesium3DTileset({
        url: Cesium.IonResource.fromAssetId(12572)
    })
);





	const tileset = viewer.scene.primitives.add(new Cesium.Cesium3DTileset({
		url : './Cesium-1.110.1/Apps/SampleData/Cesium3DTiles/PointCloud/PointCloudDraco/tileset.json'
	}));

	viewer.zoomTo(tileset, new Cesium.HeadingPitchRange(0, -0.5, 0));




viewer.scene.camera.setView({
  destination: new Cesium.Cartesian3(
    4401744.644145314,
    225051.41078911052,
    4595420.374784433
  ),
  orientation: new Cesium.HeadingPitchRoll(
    5.646733805039757,
    -0.276607153839886,
    6.281110875400085
  ),
});

try {
  const tileset = await Cesium.Cesium3DTileset.fromIonAssetId(16421);
  viewer.scene.primitives.add(tileset);
} catch (error) {
  console.log(`Error loading tileset: ${error}`);
} 

*/


/*画像表示
const point = viewer.entities.add({
	name:"福井市", 
	description:"ここは福井市です。",
	position : Cesium.Cartesian3.fromDegrees(136.223554,36.061957,0), 
	point : {
		pixelSize : 10, 
		color : Cesium.Color.BLUE
	}
});



const img = viewer.entities.add({
	position: Cesium.Cartesian3.fromDegrees(136.223554,36.061957,0), 
	billboard:{
		image:"./img/noimage2.png",
		scale:0.5,
		//width:50,
		//height:100,
		//horizontalOrigin:Cesium.HorizontalOrigin.LEFT,
		//verticalOrigin:Cesium.VerticalOrigin.TOP,
		rotation:30* ( Math.PI / 180 ),
	}
});



const img2 = viewer.entities.add({
	position: Cesium.Cartesian3.fromDegrees(136.223554,36.061957,0), 
	billboard:{
		image:"./img/noimage3.png",
		scale:0.5,
		//width:50,
		//height:100,
		horizontalOrigin:Cesium.HorizontalOrigin.LEFT,
		verticalOrigin:Cesium.VerticalOrigin.TOP,
		rotation:-30* ( Math.PI / 180 ),
	}
});
*/


/*
	const viewer = new Cesium.Viewer("cesiumContainer", {
		terrainProvider:Cesium.createWorldTerrain()
	});
*/

/*

	//―――――――――――――――――――――――――――――――――――――――●ホームボタン
	viewer.homeButton.viewModel.command.beforeExecute.addEventListener(
		function(e){
			e.cancel = true;
			viewer.camera.flyTo({
				destination:Cesium.Cartesian3.fromDegrees(138.7308, 35.2629, 5000.0),
				orientation:{
					heading:Cesium.Math.toRadians(0.0),
					pitch:Cesium.Math.toRadians(-15.0),
					roll:0.0
				}
			});
		}
	);

	viewer.entities.add({
		position:Cesium.Cartesian3.fromDegrees(138.7311,35.3629,4000),
		label:{
			text:"富士山"
		}
	});

var polygon = viewer.entities.add({
    name:"福井県庁",
    description:"ここは福井県庁です。",　
    polygon : {
        hierarchy : Cesium.Cartesian3.fromDegreesArrayHeights([
          136.220266, 36.066095,0,
          136.220287, 36.063848,0,
          136.221542, 36.063857,0,
          136.222444, 36.063978,0,
          136.222529, 36.064239,0,
          136.223495, 36.064516,0,
          136.223238, 36.065704,0,
          136.223034, 36.065722,0,
          136.222948, 36.066190,0,
          136.222315, 36.066138,0,
          136.221435,36.066216,0]),
        heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,
        extrudedHeight: 333.0,
        material : Cesium.Color.RED.withAlpha(0.5),
        outline : true,
        outlineColor : Cesium.Color.BLACK
    }
});

const label = viewer.entities.add({
	position : Cesium.Cartesian3.fromDegrees(136.222266, 36.065095,400),
	label:{
		text:"東京都庁",
		font:"20px sans-serif",
		fillColor:Cesium.Color.YELLOW,
		outlineColor:Cesium.Color.BLACK,
		outlineWidth:2,
		style:Cesium.LabelStyle.FILL_AND_OUTLINE
	}
});
*/

	//―――――――――――――――――――――――――――――――――――――――●kml　読み込み
	viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/N03-23_01_230101_test_231110.kmz'));//北海道全域　表示された
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/N03-23_01_230101_test_231110/doc.kml'));//北海道全域　KMZ→KMLにしてみた　表示された
	
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/N03-23_01_230101_test_231110.kmz'));
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_tansyoku2.kmz'));
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji.kmz'));//まずコピーしておく　上を単色にする　浸水ランクをに戻す　コピー側を単色にする
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji2.kmz'));//下地を外してみた　浸水ランクが表示された
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji3.kmz'));//下地のみ　表示されない　出力時に上を選んだから？
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji4.kmz'));//下地のみ　表示されない　出力時に下を選んだのだが
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji5.kmz'));//下地を上に上げた　表示された
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji6.kmz'));//下に下げた浸水ランク側で出力　表示されない
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji7.kmz'));//もう一度最初からやり直し　国土情報データを　浸水ランクインポート　これは表示されないはず　……された
	viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_re_sitaji8.kmz'));//インポート元のレイヤを消した　どうか？　表示された

	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A312020_0100170001_LayerToKM_tansyoku3_sinsui_modosi.kmz'));
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/テストデータ_231108_2009_2_MapToKML.kmz'));
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/A31-10-20_0100170001_test_231110/doc.kml'));
	viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/BP001_BREAKPOINT_LayerToKML1.kmz'));
	//viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/BP001_max_LayerToKML_tansyoku.kmz'));
	viewer.dataSources.add(Cesium.KmlDataSource.load('../kml/BP001_max_LayerToKML2.kmz'));



const zahyou = Cesium.Cartesian3.fromDegrees(141.57809589512567,38.89082224954433,  50000.0);//気仙沼　大川
//const zahyou = Cesium.Cartesian3.fromDegrees(143.05365098142144, 44.47607230106117,   50000.0);//紋別郡
//const camera_zahyou = Cesium.Cartesian3.fromDegrees(141.57809589512567,38.86082224954433,  3000.0);
	//―――――――――――――――――――――――――――――――――――――――●ホームボタン
	viewer.homeButton.viewModel.command.beforeExecute.addEventListener(
		function(e){
			e.cancel = true;
			viewer.camera.flyTo({
				destination:zahyou,
				orientation:{
					heading:Cesium.Math.toRadians(0.0),
					pitch:Cesium.Math.toRadians(-90.0),
				},
				duration:0,
			});
		}
	);
	//―――――――――――――――――――――――――――――――――――――――●ズーム
	viewer.entities.add({
		position:Cesium.Cartesian3.fromDegrees(143.08365098142144, 44.49607230106117,   100.0),
		label:{
			text:"テスト:国土数値情報・洪水浸水想定区域データ（河川単位）・北海道"
		}
		
	});
	viewer.camera.flyTo({
		destination : zahyou,
		orientation: {
			heading: Cesium.Math.toRadians(0.0),
			pitch: Cesium.Math.toRadians(-90.0),
		    },
		duration:0,
	});
	//viewer.zoomTo(viewer.entities);
/*


/*
const viewer = new Cesium.Viewer("cesiumContainer", {
	baseLayerPicker: true,
	timeline : false,
	animation : false,
	homeButton: false,
	vrButton: true,
	geocoder:false,
	sceneModePicker:false,
	navigationHelpButton:false
});
*/

</script>
</body>
</html>